{# templates/nuevo_pedido.html #} {% extends "layout_B.html" %} {% block main %}
<link rel="stylesheet" href="../static/css/venta.css" />

<header class="encabezado">
  <a href="../index.html">
    <img src="../static/img/logo_goldenCookies.jpeg" class="logo" />
  </a>
</header>
<div style="margin-top: 55px">
  <div class="titulo">
    <img src="../static/img/carro-de-la-compra.png" alt="Venta" class="icono" />
    <h1>Carro de compra</h1>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %}
  <div style="margin: 0px 40px 0px 40px">
    {% for category, message in messages %}
    <div
      class="alert alert-{{ category }} alert-dismissible fade show"
      role="alert"
    >
      {{ message }}
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="alert"
        aria-label="Close"
      ></button>
    </div>
    {% endfor %}
  </div>
  {% endif %} {% endwith %}

  <div class="venta-container mx-4">
    <div style="width: 60%">
      {% for galleta in galletas %}
      <div
        style="
          margin: 10px 10px 0px 40px;
          width: 90%;
          border: 1px solid darkgray;
          border-radius: 5px;
          display: flex;
          overflow: hidden;
        "
      >
        <div style="flex-shrink: 0">
          <img
            src="{{galleta.imagen}}"
            alt="Imagen"
            style="
              height: 180px;
              width: auto;
              border-radius: 5px 0px 0px 5px;
              object-fit: cover;
            "
          />
        </div>
        <div style="padding: 15px 20px 15px 20px; width: 100%">
          <div>
            <h5>{{galleta.galleta}}</h5>
            <p>Cantidad: {{galleta.cantidad}}</p>
            <p>
              Precio por {{galleta.cantidad}} galletas: $ {{galleta.precio}}
            </p>
            <form
              method="post"
              action="{{url_for('pedidos.eliminar_pedido', indice=loop.index0)}}"
            >
              <input type="hidden" name="csrf_token" value="{{csrf_token()}}" />
              <button
                class="btn btn-danger btn-sm"
                style="
                  background-color: #dc3545;
                  border-radius: 13px;
                  border-color: black;
                "
              >
                Eliminar
              </button>
            </form>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <div style="margin-top: 10px; width: 50%">
      <div
        style="
          height: 50px;
          background-color: darkgray;
          border-radius: 5px;
          align-content: center;
          padding: 10px;
        "
      >
        <h5>Total a pagar: $ {{ptotal}}</h5>
      </div>
      <div
        style="display: flex; justify-content: space-between; margin-top: 10px"
      >
        <form action="{{url_for('pedidos.catalogo')}}">
          <button class="btn btn-warning">Seguir Comprando</button>
        </form>
        <form action="{{url_for('pedidos.terminar_pedido')}}">
          <button class="btn btn-warning">Eliminar carrito</button>
        </form>
        <form method="post" action="{{url_for('pedidos.realizar_pedido')}}">
          <input type="hidden" name="csrf_token" value="{{csrf_token()}}" />
          <button class="btn btn-warning">Finalizar compra</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="../static/js/venta.js"></script>
<!-- Archivo JS -->

{% endblock %}
