{% extends "layout.html" %} {% block title %}Registro - Golden Cookies{%
endblock %} {% block main %}
<div class="min-h-screen bg-cookie-50 flex items-center justify-center p-4">
  <div class="max-w-md w-full bg-white rounded-lg shadow-lg p-8 my-8">
    <!-- Logo y Título -->
    <div class="text-center mb-8">
      <img
        src="{{ url_for('static', filename='img/logo.webp') }}"
        alt="Golden Cookies Logo"
        class="mx-auto h-20 mb-4"
      />
      <h1 class="text-3xl font-kavoon text-cookie-800">Golden Cookies</h1>
      <p class="text-cookie-600">Regístrate para comenzar</p>
    </div>

    <!-- Flash messages -->
    <div id="flash-messages" class="mb-6">
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div
        id="flash-{{ loop.index }}"
        class="p-4 mb-4 rounded-lg flex justify-between items-center {% if category == 'success' %}bg-green-100 text-green-800{% elif category == 'danger' %}bg-red-100 text-red-800{% elif category == 'warning' %}bg-yellow-100 text-yellow-800{% else %}bg-blue-100 text-blue-800{% endif %}"
        role="alert"
      >
        <div>
          {% if category == 'success' %}
          <i class="fas fa-check-circle mr-2"></i>
          {% elif category == 'danger' %}
          <i class="fas fa-exclamation-circle mr-2"></i>
          {% elif category == 'warning' %}
          <i class="fas fa-exclamation-triangle mr-2"></i>
          {% else %}
          <i class="fas fa-info-circle mr-2"></i>
          {% endif %} {{ message }}
        </div>
        <button
          type="button"
          onclick="closeFlash('flash-{{ loop.index }}')"
          class="text-gray-500 hover:text-gray-700 focus:outline-none"
        >
          <i class="fas fa-times"></i>
        </button>
      </div>
      {% endfor %} {% endif %} {% endwith %}
    </div>

    <!-- Registro Form -->
    <form method="POST" action="{{ url_for('auth.registro') }}">
      {{ form.csrf_token }}

      <div class="mb-5">
        <label for="nombre" class="block text-cookie-700 mb-2"
          >Nombre Completo</label
        >
        <div class="relative">
          {{ form.nombre(class="w-full p-3 pl-10 border border-cookie-300
          rounded-md focus:ring focus:ring-cookie-400 focus:border-cookie-500",
          placeholder="Ingresa tu nombre completo", required=true) }}
          <div
            class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
          >
            <i class="fas fa-user text-cookie-400"></i>
          </div>
        </div>
        {% if form.nombre.errors %}
        <div class="text-red-600 text-sm mt-1">
          {% for error in form.nombre.errors %} {{ error }} {% endfor %}
        </div>
        {% endif %}
      </div>

      <div class="mb-5">
        <label for="nombre_usuario" class="block text-cookie-700 mb-2"
          >Nombre de Usuario</label
        >
        <div class="relative">
          {{ form.nombre_usuario(class="w-full p-3 pl-10 border
          border-cookie-300 rounded-md focus:ring focus:ring-cookie-400
          focus:border-cookie-500", placeholder="Ingresa un nombre de usuario",
          required=true) }}
          <div
            class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
          >
            <i class="fas fa-user-tag text-cookie-400"></i>
          </div>
        </div>
        {% if form.nombre_usuario.errors %}
        <div class="text-red-600 text-sm mt-1">
          {% for error in form.nombre_usuario.errors %} {{ error }} {% endfor %}
        </div>
        {% endif %}
      </div>

      <div class="mb-5">
        <label for="telefono" class="block text-cookie-700 mb-2"
          >Teléfono</label
        >
        <div class="relative">
          {{ form.telefono(class="w-full p-3 pl-10 border border-cookie-300
          rounded-md focus:ring focus:ring-cookie-400 focus:border-cookie-500",
          placeholder="Ingresa tu número telefónico", required=true) }}
          <div
            class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
          >
            <i class="fas fa-phone text-cookie-400"></i>
          </div>
        </div>
        {% if form.telefono.errors %}
        <div class="text-red-600 text-sm mt-1">
          {% for error in form.telefono.errors %} {{ error }} {% endfor %}
        </div>
        {% endif %}
      </div>

      <div class="mb-5">
        <label for="email" class="block text-cookie-700 mb-2"
          >Correo Electrónico</label
        >
        <div class="relative">
          {{ form.email(class="w-full p-3 pl-10 border border-cookie-300
          rounded-md focus:ring focus:ring-cookie-400 focus:border-cookie-500",
          placeholder="Ingresa tu correo electrónico", required=true,
          type="email") }}
          <div
            class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
          >
            <i class="fas fa-envelope text-cookie-400"></i>
          </div>
        </div>
        {% if form.email.errors %}
        <div class="text-red-600 text-sm mt-1">
          {% for error in form.email.errors %} {{ error }} {% endfor %}
        </div>
        {% endif %}
      </div>

      <div class="mb-5">
        <label for="contrasenia" class="block text-cookie-700 mb-2"
          >Contraseña</label
        >
        <div class="relative">
          {{ form.contrasenia(class="w-full p-3 pl-10 border border-cookie-300
          rounded-md focus:ring focus:ring-cookie-400 focus:border-cookie-500",
          placeholder="Crea una contraseña", required=true) }}
          <div
            class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
          >
            <i class="fas fa-lock text-cookie-400"></i>
          </div>
          <button
            type="button"
            onclick="togglePasswordVisibility('contrasenia')"
            class="absolute inset-y-0 right-0 flex items-center pr-3"
          >
            <i id="password-toggle-icon" class="fas fa-eye text-cookie-400"></i>
          </button>
        </div>
        {% if form.contrasenia.errors %}
        <div class="text-red-600 text-sm mt-1">
          {% for error in form.contrasenia.errors %} {{ error }} {% endfor %}
        </div>
        {% endif %}
      </div>

      <div class="mb-6">
        <label for="confirmar_contrasenia" class="block text-cookie-700 mb-2"
          >Confirmar Contraseña</label
        >
        <div class="relative">
          {{ form.confirmar_contrasenia(class="w-full p-3 pl-10 border
          border-cookie-300 rounded-md focus:ring focus:ring-cookie-400
          focus:border-cookie-500", placeholder="Confirma tu contraseña",
          required=true) }}
          <div
            class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
          >
            <i class="fas fa-lock text-cookie-400"></i>
          </div>
          <button
            type="button"
            onclick="togglePasswordVisibility('confirmar_contrasenia')"
            class="absolute inset-y-0 right-0 flex items-center pr-3"
          >
            <i
              id="confirm-password-toggle-icon"
              class="fas fa-eye text-cookie-400"
            ></i>
          </button>
        </div>
        {% if form.confirmar_contrasenia.errors %}
        <div class="text-red-600 text-sm mt-1">
          {% for error in form.confirmar_contrasenia.errors %} {{ error }} {%
          endfor %}
        </div>
        {% endif %}
      </div>

      <div class="mb-6">
        <div class="flex items-center">
          <input
            type="checkbox"
            id="terminos"
            name="terminos"
            class="h-4 w-4 text-cookie-600 focus:ring-cookie-500 border-cookie-300 rounded"
            required
          />
          <label for="terminos" class="ml-2 block text-sm text-cookie-700">
            Acepto los
            <a
              href="#"
              class="text-cookie-700 hover:text-cookie-800 font-medium"
              >términos y condiciones</a
            >
          </label>
        </div>
      </div>

      <button
        type="submit"
        class="w-full bg-cookie-600 text-white py-3 px-4 rounded-md hover:bg-cookie-700 transition-colors font-medium"
      >
        <i class="fas fa-user-plus mr-2"></i>Crear Cuenta
      </button>
    </form>

    <!-- Links -->
    <div class="mt-6 text-center">
      <p class="text-cookie-600">
        ¿Ya tienes una cuenta?
        <a
          href="{{ url_for('auth.login') }}"
          class="text-cookie-700 hover:text-cookie-800 font-medium"
        >
          Iniciar Sesión
        </a>
      </p>
    </div>
  </div>
</div>

<script>
  // Cerrar mensaje flash
  function closeFlash(id) {
    const flashElement = document.getElementById(id);
    if (flashElement) {
      flashElement.style.opacity = "0";
      setTimeout(() => {
        flashElement.style.display = "none";
      }, 300);
    }
  }

  // Cerrar mensajes flash automáticamente después de 5 segundos
  document.addEventListener("DOMContentLoaded", function () {
    const flashMessages = document.querySelectorAll('[id^="flash-"]');
    flashMessages.forEach((message) => {
      // Añadir transición para efecto de desvanecimiento
      message.style.transition = "opacity 0.3s ease";

      // Cerrar automáticamente después de 5 segundos
      setTimeout(() => {
        closeFlash(message.id);
      }, 5000);
    });
  });

  // Función para mostrar/ocultar contraseña
  function togglePasswordVisibility(inputId) {
    const passwordInput = document.getElementById(inputId);
    const iconId =
      inputId === "contrasenia"
        ? "password-toggle-icon"
        : "confirm-password-toggle-icon";
    const icon = document.getElementById(iconId);

    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    } else {
      passwordInput.type = "password";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    }
  }
</script>
{% endblock %}
